var SC=SC||{};SC.chart||(SC.chart={});var SC=SC||{};SC.chart||(SC.chart={}),SC.chart.bar=function(){"use strict";function t(e){var n=d3.select(e).append("svg");t.draw(n)}function e(){var t,e;l.domain([0,d3.max(a,function(t){return t.value})]),t=r.selectAll("g").data(a,function(t){return t.key}),t.enter().append("g").attr("class","bar").attr("transform",function(t,e){return"translate(0,"+e*i+")"}),e=t.append("rect").attr("width",function(t){return l(t.value)}).attr("height",i-1),n&&e.attr("style",function(t){return"fill: "+n(t.key)}),t.append("text").attr("x","10px").attr("y",i/2).attr("dy",".30em").text(function(t){return t.label||t.key}),t.exit().remove()}var n,a,r,i=20,o=270,u=600,d={top:0,right:0,bottom:0,left:0},c=function(){return u-d.left-d.right},l=d3.scale.linear().range([0,c()]);return t.draw=function(t){r=t.attr("class","sc-bar-chart").attr("height",o).attr("width",u).append("g").attr("transform","translate("+d.left+","+d.top+")"),e()},t.color=function(e){return arguments.length?(n=e,t):n},t.data=function(e){return arguments.length?(a=e,t):a},t.height=function(e){return arguments.length?(o=e,t):o},t.margin=function(e){return arguments.length?(d=e,l.range([0,c()]),t):d},t.updateData=function(n){return a=n,e(),t},t.width=function(e){return arguments.length?(u=e,l.range([0,c()]),t):u},t},!function(t){t.layouts||(t.layouts={}),t.layouts.pie=d3.layout.pie().sort(null).startAngle(0).endAngle(2*Math.PI).value(function(t){return t.values})}(SC),!function(t){t.common||(t.common={}),t.common.keyFunction=function(t){var e=d3.range(t.length),n=[];return e.forEach(function(e){n[e]={data:t[e]}}),n}}(SC),!function(t){t.chart.pie=function(){"use strict";function e(t){e.reDrawChart(t)}function n(){function e(t){var e=d3.interpolate({startAngle:0*Math.PI,endAngle:0*Math.PI},t);return function(t){return n(e(t))}}var n=d3.svg.arc(),r=($(d).data("chart-type")||"pie",$(d).data("animation-type")||"exp-in-out"),i=$(d).data("animation-speed")||1200;f.HideLegend===!0?n.outerRadius(p/2.5).innerRadius(0):h/2>p?n.outerRadius(p/2.5).innerRadius(0):n.outerRadius(h/4.5).innerRadius(0);var u=t.layouts.pie(a.values),c=o.selectAll(".arc").data(u).enter().append("g").attr("class","arc").each(function(t){isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=0)});c.append("path").attr("d",n).style("fill",function(t,e){return v(e)}).transition().ease(r).duration(i).attrTween("d",e).style("cursor",function(t){return"other"!==t.data.url?"default":"pointer"})}var a,r,i,o,u,d,c,l,s,p=256,h=600,f={},g=["#256194","#0494d7","#8fb7e1","#a3cf5d","#7a9900","#d00a2d","#f15c21","#fcce07","#a743b3","#593d83","#65656a","#193b53"],v=d3.scale.ordinal().range(g);return e.reDrawChart=function(t){c&&c.remove(),f.HideLegend===!0?r=h>p?p:h:(r=h/2>p?p:h/2,i=h-r),d=t,c=d3.select(t).append("div").attr("class","sc-pie-chart-container").attr("height",p),this.drawChart()},e.drawChart=function(){l=c.append("div").attr("class","sc-pie-chart").attr("width",r).attr("height",p),l.append("div").attr("class","sc-pie-chart-refresh-icon").style("display","none");var t=l.append("svg");return f.HideLegend!==!0?(s=c.append("div").attr("class","sc-pie-chart-key").style("width",i+"px").attr("height",p),void 0!==a&&a.values.length>0&&e.drawKey(s),e.drawPieChart(t),e):void 0},e.drawPieChart=function(t){o=t.attr("height",p).attr("width",r).append("g").attr("transform","translate("+r/2+","+p/2+")"),n()},e.drawKey=function(e){if(f.HideLegend!==!0){e.append("div").attr("class","sc-pie-chart-keyHeader").text(a.title);var n=t.common.keyFunction(a.values);u=e.append("div");var r=u.append("ul"),i=r.selectAll("li").data(n).enter().append("li").style("cursor",function(t){return"other"!==t.data.url?"default":"pointer"}),o=$(d).data("animation-type")||"exp-in-out",c=$(d).data("animation-speed")||1200,l=$(d).data("key-animation-type")||o,s=$(d).data("key-animation-speed")||c;i.append("div").transition().duration(s).ease(l).style("width","1.125em").style("height","1.125em").style("background-color",function(t,e){return g[e]});var p=i.append("div").text(function(t){return t.data.key}).style("opacity","0");p.transition().duration(s).ease(l).style("opacity","1")}},e.on=function(t,n){return n&&(o&&o.selectAll("path").on(t,n),u&&u.selectAll("li").on(t,n)),e},e.colors=function(t){return arguments.length?(g=t,v=d3.scale.ordinal().range(g),e):g},e.data=function(t){return a=t,e},e.height=function(t){return arguments.length?(t>0&&(p=t),e):p},e.width=function(t){return arguments.length?(h=t,e):h},e.updateData=function(t){return a=t,n(),e},e.options=function(t){return arguments.length?(f=$.extend(f,t),e):f},e.updateChart=function(){c&&(l&&l.remove(),s&&s.remove()),this.drawChart()},e}}(SC);