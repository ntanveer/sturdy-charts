var SC=SC||{};SC.chart||(SC.chart={}),!function(t){t.layouts||(t.layouts={}),t.layouts.pie=d3.layout.pie().sort(null).startAngle(0).endAngle(2*Math.PI).value(function(t){return t.values})}(SC),!function(t){t.common||(t.common={}),t.common.keyFunction=function(t){var e=d3.range(t.length),a=[];return e.forEach(function(e){a[e]={data:t[e]}}),a}}(SC),!function(t){t.chart.pie=function(){"use strict";function e(t){e.reDrawChart(t)}function a(){function e(t){var e=d3.interpolate({startAngle:0*Math.PI,endAngle:0*Math.PI},t);return function(t){return a(e(t))}}var a=d3.svg.arc(),r=($(u).data("chart-type")||"pie",$(u).data("animation-type")||"exp-in-out"),i=$(u).data("animation-speed")||1200;f.HideLegend===!0?a.outerRadius(p/2.5).innerRadius(0):h/2>p?a.outerRadius(p/2.5).innerRadius(0):a.outerRadius(h/4.5).innerRadius(0);var o=t.layouts.pie(n.values),c=d.selectAll(".arc").data(o).enter().append("g").attr("class","arc").each(function(t){isNaN(t.startAngle)&&(t.startAngle=0),isNaN(t.endAngle)&&(t.endAngle=0)});c.append("path").attr("d",a).style("fill",function(t,e){return y(e)}).transition().ease(r).duration(i).attrTween("d",e).style("cursor",function(t){return"other"!==t.data.url?"default":"pointer"})}var n,r,i,d,o,u,c,s,l,p=256,h=600,f={},g=["#256194","#0494d7","#8fb7e1","#a3cf5d","#7a9900","#d00a2d","#f15c21","#fcce07","#a743b3","#593d83","#65656a","#193b53"],y=d3.scale.ordinal().range(g);return e.reDrawChart=function(t){c&&c.remove(),f.HideLegend===!0?r=h>p?p:h:(r=h/2>p?p:h/2,i=h-r),u=t,c=d3.select(t).append("div").attr("class","sc-pie-chart-container").attr("height",p),this.drawChart()},e.drawChart=function(){s=c.append("div").attr("class","sc-pie-chart").attr("width",r).attr("height",p),s.append("div").attr("class","sc-pie-chart-refresh-icon").style("display","none");var t=s.append("svg");return f.HideLegend!==!0?(l=c.append("div").attr("class","sc-pie-chart-key").style("width",i+"px").attr("height",p),void 0!==n&&n.values.length>0&&e.drawKey(l),e.drawPieChart(t),e):void 0},e.drawPieChart=function(t){d=t.attr("height",p).attr("width",r).append("g").attr("transform","translate("+r/2+","+p/2+")"),a()},e.drawKey=function(e){if(f.HideLegend!==!0){e.append("div").attr("class","sc-pie-chart-keyHeader").text(n.title);var a=t.common.keyFunction(n.values);o=e.append("div");var r=o.append("ul"),i=r.selectAll("li").data(a).enter().append("li").style("cursor",function(t){return"other"!==t.data.url?"default":"pointer"}),d=$(u).data("animation-type")||"exp-in-out",c=$(u).data("animation-speed")||1200,s=$(u).data("key-animation-type")||d,l=$(u).data("key-animation-speed")||c;i.append("div").transition().duration(l).ease(s).style("width","1.125em").style("height","1.125em").style("background-color",function(t,e){return g[e]});var p=i.append("div").text(function(t){return t.data.key}).style("opacity","0");p.transition().duration(l).ease(s).style("opacity","1")}},e.on=function(t,a){return a&&(d&&d.selectAll("path").on(t,a),o&&o.selectAll("li").on(t,a)),e},e.colors=function(t){return arguments.length?(g=t,y=d3.scale.ordinal().range(g),e):g},e.data=function(t){return n=t,e},e.height=function(t){return arguments.length?(t>0&&(p=t),e):p},e.width=function(t){return arguments.length?(h=t,e):h},e.updateData=function(t){return n=t,a(),e},e.options=function(t){return arguments.length?(f=$.extend(f,t),e):f},e.updateChart=function(){c&&(s&&s.remove(),l&&l.remove()),this.drawChart()},e}}(SC);
